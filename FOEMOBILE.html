<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOE Game</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
:root{--bg:#1a1a2e;--text:#e94560;--primary:#16213e;--secondary:#0f3460;--accent:#e94560;--p1:#4361ee;--cpu:#fca311}
body{font-family:'Poppins',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;background:var(--bg);color:var(--text)}
.game-container{max-width:800px;padding:2rem;background:var(--primary);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.3)}
h1{text-align:center;font-size:3rem;margin-bottom:2rem;color:var(--accent);text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
.grid{display:grid;gap:10px;margin-bottom:2rem;perspective:1000px}
.cell{aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:1.2rem;cursor:pointer;background:var(--secondary);border-radius:10px;transition:.3s;transform-style:preserve-3d}
.cell:hover{transform:scale(1.05) rotateY(10deg)}
.cell.revealed-player1{background:var(--p1);color:#fff;transform:rotateY(180deg)}
.cell.revealed-cpu1{background:var(--cpu);color:#fff;transform:rotateY(180deg)}
.cell.valid-move{box-shadow:0 0 10px var(--accent)}
.cell.temp-revealed{background:var(--accent);animation:pulse .5s infinite alternate}
@keyframes pulse{from{opacity:.7}to{opacity:1}}
.player-info{display:flex;justify-content:space-between;margin-bottom:2rem}
.player-box{padding:1rem;border-radius:10px;width:48%;background:var(--secondary);transition:.3s}
.player-box.active{box-shadow:0 0 20px var(--accent);transform:translateY(-5px)}
.player-box h2{margin-top:0;color:var(--accent)}
.combo-bars{display:flex;flex-direction:column;gap:10px}
.combo-bar{height:15px;background:rgba(255,255,255,0.1);border-radius:10px;overflow:hidden}
.combo-bar-fill{height:100%;width:0;transition:.3s}
.combo-bar-fill.five{background:#ff6b6b}
.combo-bar-fill.odd{background:#4ecdc4}
.combo-bar-fill.even{background:#45b7d1}
.combo-bar-fill.maxed{background:gold;animation:glow 1s infinite alternate}
@keyframes glow{from{box-shadow:0 0 5px gold}to{box-shadow:0 0 20px gold}}
.combo-bar-fill.flashing{animation:flash .5s infinite alternate}
@keyframes flash{from{opacity:.5}to{opacity:1}}
button{display:block;width:100%;padding:1rem;margin-top:1rem;background:var(--accent);color:#fff;border:none;border-radius:10px;cursor:pointer;font-size:1rem;font-weight:bold;text-transform:uppercase;transition:.3s}
button:hover{background:#ff6b6b;transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,0.2)}
select{width:100%;padding:1rem;margin-bottom:1rem;background:var(--secondary);color:var(--text);border:2px solid var(--accent);border-radius:10px;font-size:1rem;appearance:none;cursor:pointer}
.game-over-dialog{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--primary);padding:2rem;border-radius:20px;box-shadow:0 0 30px rgba(0,0,0,0.5);text-align:center;z-index:1000}
.game-over-dialog h2{color:var(--accent);font-size:2.5rem;margin-top:0}
#winner-text{font-size:1.5rem;font-weight:bold;margin-bottom:1rem}
</style>
</head>
<body>
<div class="game-container">
<h1>FOE Game</h1>
<div id="game-start">
<label for="grid-size">Select Grid Size:</label>
<select id="grid-size"><option value="5">5x5</option><option value="10">10x10</option></select>
<button id="start-game">Start Game</button>
</div>
<div id="game-play" style="display:none">
<div class="player-info">
<div id="player1-info" class="player-box">
<h2>PLAYER1</h2>
<p>Score: <span id="player1-score">0</span></p>
<p>Multiplier: <span id="player1-multiplier">1</span>x</p>
<div class="combo-bars">
<div class="combo-bar"><div id="player1-five" class="combo-bar-fill five"></div></div>
<div class="combo-bar"><div id="player1-odd" class="combo-bar-fill odd"></div></div>
<div class="combo-bar"><div id="player1-even" class="combo-bar-fill even"></div></div>
</div>
</div>
<div id="cpu1-info" class="player-box">
<h2>CPU1</h2>
<p>Score: <span id="cpu1-score">0</span></p>
<p>Multiplier: <span id="cpu1-multiplier">1</span>x</p>
<div class="combo-bars">
<div class="combo-bar"><div id="cpu1-five" class="combo-bar-fill five"></div></div>
<div class="combo-bar"><div id="cpu1-odd" class="combo-bar-fill odd"></div></div>
<div class="combo-bar"><div id="cpu1-even" class="combo-bar-fill even"></div></div>
</div>
</div>
</div>
<div id="grid" class="grid"></div>
<div id="current-player"></div>
<button id="reset-game">Reset Game</button>
</div>
</div>
<div id="game-over-dialog" class="game-over-dialog">
<h2>Game Over!</h2>
<p id="winner-text"></p>
<p>Final Scores:</p>
<p>PLAYER1: <span id="final-score-player1"></span></p>
<p>CPU1: <span id="final-score-cpu1"></span></p>
<button id="restart-game">Play Again</button>
</div>
<script>
const REVEAL_TIME=2e3,MAX_COMBO=10;let gameState="START",gridSize=10,grid=[],currentPlayer="PLAYER1",playerCells={PLAYER1:[],CPU1:[]},scores={PLAYER1:0,CPU1:0},combos={PLAYER1:[],CPU1:[]},scoreMultipliers={PLAYER1:1,CPU1:1},fiveMultipliers={PLAYER1:1,CPU1:1},isRevealing=!1;function initializeGame(){const e=gridSize*gridSize;grid=Array.from({length:e},(e,r)=>({value:r+1,revealed:!1,owner:null,tempRevealed:!1}));for(let e=grid.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[grid[e],grid[r]]=[grid[r],grid[e]]}currentPlayer="PLAYER1",playerCells={PLAYER1:[],CPU1:[]},scores={PLAYER1:0,CPU1:0},combos={PLAYER1:[],CPU1:[]},scoreMultipliers={PLAYER1:1,CPU1:1},fiveMultipliers={PLAYER1:1,CPU1:1},gameState="PLAYING",renderGame()}function isValidMove(e){return!grid[e].revealed&&(0===playerCells[currentPlayer].length||getSurroundingIndices(e).some(e=>playerCells[currentPlayer].includes(e)))}function getSurroundingIndices(e){const r=Math.floor(e/gridSize),t=e%gridSize;return[e-gridSize-1,e-gridSize,e-gridSize+1,e-1,e+1,e+gridSize-1,e+gridSize,e+gridSize+1].filter(e=>{const l=Math.floor(e/gridSize),a=e%gridSize;return l>=0&&l<gridSize&&a>=0&&a<gridSize&&Math.abs(l-r)<=1&&Math.abs(a-t)<=1})}function handleCellClick(e){isRevealing||"GAME_OVER"===gameState||"PLAYER1"!==currentPlayer||!isValidMove(e)||makeMove(e)}function makeMove(e){if("GAME_OVER"===gameState)return;grid[e].revealed=!0,grid[e].owner=currentPlayer,playerCells[currentPlayer].push(e),updateCombo(grid[e].value),updateScore(),revealSurroundingCells(e),renderGame(),checkGameEnd()}function updateCombo(e){const r=e%2==0,t=e%5==0,l=combos[currentPlayer].find(e=>"FIVE"===e.type),a=combos[currentPlayer].filter(e=>"EVEN"===e.type&&r||"ODD"===e.type&&!r||"FIVE"===e.type&&t).map(e=>({...e,count:"FIVE"===e.type?Math.min(e.count+1,2):Math.min(e.count+1,MAX_COMBO)}));if(t){l?2===l.count&&(fiveMultipliers[currentPlayer]*=2,a.find(e=>"FIVE"===e.type).count=0):a.push({type:"FIVE",count:1})}r&&!a.some(e=>"EVEN"===e.type)?a.push({type:"EVEN",count:1}):r||a.some(e=>"ODD"===e.type)||a.push({type:"ODD",count:1}),combos[currentPlayer]=a,updateScoreMultiplier(),updateComboBars()}function updateScoreMultiplier(){let e=1;combos[currentPlayer].forEach(r=>{"FIVE"!==r.type&&(e=Math.max(e,r.count))}),scoreMultipliers[currentPlayer]=e*fiveMultipliers[currentPlayer]}function updateScore(){scores[currentPlayer]+=1*scoreMultipliers[currentPlayer],document.getElementById(`${currentPlayer.toLowerCase()}-score`).textContent=Math.floor(scores[currentPlayer]),document.getElementById(`${currentPlayer.toLowerCase()}-multiplier`).textContent=scoreMultipliers[currentPlayer]}function updateComboBars(){["FIVE","ODD","EVEN"].forEach(e=>{const r=combos[currentPlayer].find(r=>r.type===e),t=document.getElementById(`${currentPlayer.toLowerCase()}-${e.toLowerCase()}`);if(r){const l="FIVE"===e?50*r.count:Math.min(10*r.count,100);t.style.width=`${l}%`,t.classList.toggle("maxed",r.count>=("FIVE"===e?2:MAX_COMBO)),t.classList.toggle("flashing","FIVE"===e&&2===r.count)}else t.style.width="0%",t.classList.remove("maxed","flashing")})}function revealSurroundingCells(e){isRevealing=!0;const r=getSurroundingIndices(e);r.forEach(e=>{grid[e].revealed||(grid[e].tempRevealed=!0)}),renderGame(),setTimeout(()=>{r.forEach(e=>{grid[e].tempRevealed=!1}),isRevealing=!1,currentPlayer="PLAYER1"===currentPlayer?"CPU1":"PLAYER1",renderGame(),"CPU1"===currentPlayer&&"PLAYING"===gameState?setTimeout(makeCPUMove,500):checkGameEnd()},REVEAL_TIME)}function makeCPUMove(){if("GAME_OVER"===gameState)return;const e=getValidMoves();e.length>0?makeMove(e[Math.floor(Math.random()*e.length)]):checkGameEnd()}function getValidMoves(){return grid.reduce((e,r,t)=>isValidMove(t)?[...e,t]:e,[])}function hasValidMoves(e){return grid.some((r,t)=>!r.revealed&&(0===playerCells[e].length||getSurroundingIndices(t).some(r=>playerCells[e].includes(r))))}function isAllRevealed(){return grid.every(e=>e.revealed)}function checkGameEnd(){isAllRevealed()||!hasValidMoves("PLAYER1")&&!hasValidMoves("CPU1")?endGame():("PLAYER1"===currentPlayer&&!hasValidMoves("PLAYER1")||"CPU1"===currentPlayer&&!hasValidMoves("CPU1"))&&(currentPlayer="PLAYER1"===currentPlayer?"CPU1":"PLAYER1",renderGame(),"CPU1"===currentPlayer&&setTimeout(makeCPUMove,500))}function endGame(){gameState="GAME_OVER",renderGame();const e=scores.PLAYER1>scores.CPU1?"You win!":"CPU wins!";document.getElementById("winner-text").textContent=e,document.getElementById("final-score-player1").textContent=Math.floor(scores.PLAYER1),document.getElementById("final-score-cpu1").textContent=Math.floor(scores.CPU1),document.getElementById("game-over-dialog").style.display="block"}function renderGame(){const e=document.getElementById("grid");e.style.gridTemplateColumns=`repeat(${gridSize}, 1fr)`,e.innerHTML="",grid.forEach((r,t)=>{const l=document.createElement("div");l.className="cell",r.revealed?(l.classList.add(`revealed-${r.owner.toLowerCase()}`),l.textContent=r.value):r.tempRevealed?(l.classList.add("temp-revealed"),l.textContent=r.value):isValidMove(t)&&"PLAYER1"===currentPlayer&&"PLAYING"===gameState&&l.classList.add("valid-move"),l.addEventListener("click",()=>handleCellClick(t)),e.appendChild(l)}),document.getElementById("player1-info").classList.toggle("active","PLAYER1"===currentPlayer),document.getElementById("cpu1-info").classList.toggle("active","CPU1"===currentPlayer),document.getElementById("current-player").textContent=`Current Player: ${"GAME_OVER"===gameState?"Game Over":currentPlayer}`,updateComboBars()}document.getElementById("start-game").addEventListener("